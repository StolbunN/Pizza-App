import{r as i,j as s,c as x,u as j,L as y,a as f,R as v,b as w,d as N,P as k,A as q,H as b}from"./index-B5083Nay.js";const C="_search_b2br4_1",m={"search-wrapper":"_search-wrapper_b2br4_1",search:C},E="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M11.0469%2011.3999L14.4999%2014.4999'%20stroke='%23434B67'%20stroke-width='2'%20stroke-linecap='round'/%3e%3cpath%20d='M7%2013C10.3137%2013%2013%2010.3137%2013%207C13%203.68629%2010.3137%201%207%201C3.68629%201%201%203.68629%201%207C1%2010.3137%203.68629%2013%207%2013Z'%20stroke='%23767F9D'%20stroke-width='2'/%3e%3c/svg%3e",F=i.forwardRef(function({className:a,...t},c){return s.jsxs("div",{className:m["search-wrapper"],children:[s.jsx("img",{src:E,alt:"Иконка поиска"}),s.jsx("input",{...t,ref:c,className:x(m.search,a)})]})}),L="_header_1ui9r_1",S="_products_1ui9r_15",h={header:L,products:S},I="_link_1y0q6_1",M="_card_1y0q6_9",P="_img_1y0q6_37",R="_price_1y0q6_75",$="_cart_1y0q6_109",A="_description_1y0q6_145",D="_name_1y0q6_153",B="_ingredients_1y0q6_167",r={link:I,card:M,"product-img":"_product-img_1y0q6_23",img:P,"buy-panel":"_buy-panel_1y0q6_61",price:R,cart:$,description:A,name:D,ingredients:B};function H(e){const a=j(),t=c=>{c.preventDefault(),a(w.add(e.id))};return s.jsx(y,{to:`/product/${e.id}`,className:r.link,children:s.jsxs("div",{className:r.card,children:[s.jsxs("div",{className:r["product-img"],children:[s.jsx("img",{className:r.img,src:e.image,alt:""}),s.jsxs("div",{className:r["buy-panel"],children:[s.jsx("div",{className:r.price,children:s.jsx("span",{children:e.price})}),s.jsx("button",{className:r.cart,onClick:t,children:s.jsx("img",{className:r.cart__img,src:f,alt:""})})]}),s.jsx(v,{appearance:"rating-card_position",rating:e.rating})]}),s.jsxs("div",{className:r.description,children:[s.jsx("div",{className:r.name,children:e.name}),s.jsx("div",{className:r.ingredients,children:e.ingredients})]})]})})}const W="_wrapper_v1pfa_1",X={wrapper:W};function Z({products:e}){return s.jsx("div",{className:X.wrapper,children:e.map(a=>s.jsx(H,{id:a.id,price:a.price,rating:a.rating,image:a.image,name:a.name,ingredients:a.ingredients.join(", ")},a.id))})}function G(){const[e,a]=i.useState([]),[t,c]=i.useState(!1),[o,g]=i.useState(),[l,_]=i.useState("");i.useEffect(()=>{p(l)},[l]);const u=async d=>{_(d.target.value)},p=async d=>{try{c(!0);const{data:n}=await N.get(`${k}/products`,{params:{name:d}});a(n)}catch(n){n instanceof q&&(console.error(n.message),g(n.message)),console.error(n);return}finally{c(!1)}};return s.jsxs("div",{children:[s.jsxs("div",{className:h.header,children:[s.jsx(b,{children:"Меню"}),s.jsx(F,{type:"search",placeholder:"Введите блюдо или состав",onChange:u})]}),s.jsxs("main",{className:h.products,children:[o&&s.jsx(s.Fragment,{children:o}),!t&&e.length>0&&s.jsx(Z,{products:e}),t&&s.jsx(s.Fragment,{children:"Загрузка..."}),!t&&e.length===0&&s.jsx(s.Fragment,{children:"Не найдено"})]})]})}export{G as default};
