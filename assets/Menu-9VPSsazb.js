import{r as i,j as s,c as x,u as j,L as y,R as f,a as v,b as N,P as q,A as w,H as b}from"./index-CvsxGhJ5.js";const k="_search_b2br4_1",m={"search-wrapper":"_search-wrapper_b2br4_1",search:k},E=i.forwardRef(function({className:a,...c},n){return s.jsxs("div",{className:m["search-wrapper"],children:[s.jsx("img",{src:"./search.svg",alt:"Иконка поиска"}),s.jsx("input",{...c,ref:n,className:x(m.search,a)})]})}),S="_header_1ui9r_1",F="_products_1ui9r_15",_={header:S,products:F},L="_link_1y0q6_1",P="_card_1y0q6_9",R="_img_1y0q6_37",$="_price_1y0q6_75",A="_cart_1y0q6_109",C="_description_1y0q6_145",I="_name_1y0q6_153",M="_ingredients_1y0q6_167",r={link:L,card:P,"product-img":"_product-img_1y0q6_23",img:R,"buy-panel":"_buy-panel_1y0q6_61",price:$,cart:A,description:C,name:I,ingredients:M};function D(e){const a=j(),c=n=>{n.preventDefault(),a(v.add(e.id))};return s.jsx(y,{to:`/product/${e.id}`,className:r.link,children:s.jsxs("div",{className:r.card,children:[s.jsxs("div",{className:r["product-img"],children:[s.jsx("img",{className:r.img,src:e.image,alt:""}),s.jsxs("div",{className:r["buy-panel"],children:[s.jsx("div",{className:r.price,children:s.jsx("span",{children:e.price})}),s.jsx("button",{className:r.cart,onClick:c,children:s.jsx("img",{className:r.cart__img,src:"./cart-icon-white.svg",alt:""})})]}),s.jsx(f,{appearance:"rating-card_position",rating:e.rating})]}),s.jsxs("div",{className:r.description,children:[s.jsx("div",{className:r.name,children:e.name}),s.jsx("div",{className:r.ingredients,children:e.ingredients})]})]})})}const H="_wrapper_v1pfa_1",X={wrapper:H};function z({products:e}){return s.jsx("div",{className:X.wrapper,children:e.map(a=>s.jsx(D,{id:a.id,price:a.price,rating:a.rating,image:a.image,name:a.name,ingredients:a.ingredients.join(", ")},a.id))})}function G(){const[e,a]=i.useState([]),[c,n]=i.useState(!1),[o,u]=i.useState(),[l,g]=i.useState("");i.useEffect(()=>{p(l)},[l]);const h=async d=>{g(d.target.value)},p=async d=>{try{n(!0);const{data:t}=await N.get(`${q}/products`,{params:{name:d}});a(t)}catch(t){t instanceof w&&(console.error(t.message),u(t.message)),console.error(t);return}finally{n(!1)}};return s.jsxs("div",{children:[s.jsxs("div",{className:_.header,children:[s.jsx(b,{children:"Меню"}),s.jsx(E,{type:"search",placeholder:"Введите блюдо или состав",onChange:h})]}),s.jsxs("main",{className:_.products,children:[o&&s.jsx(s.Fragment,{children:o}),!c&&e.length>0&&s.jsx(z,{products:e}),c&&s.jsx(s.Fragment,{children:"Загрузка..."}),!c&&e.length===0&&s.jsx(s.Fragment,{children:"Не найдено"})]})]})}export{G as default};
